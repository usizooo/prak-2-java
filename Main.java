// Объявление пакета, в котором находится класс Main
package org.example;

// Импорт класса Scanner из пакета java.util для считывания ввода с клавиатуры
import java.util.Scanner;

// Объявление публичного класса с именем Main
public class Main{

    // Объявление и инициализация константы EARTH_RADIUS_KM,
    // представляющей радиус Земли в километрах
    private static final double EARTH_RADIUS_KM = 6371.0;
    // Объявление метода main, который является точкой входа в программу
    public static void main(String[] args) {
        // Создание объекта Scanner для считывания ввода с клавиатуры
        Scanner s = new Scanner(System.in);
        // Вывод на экран сообщения с запросом ввода широты и долготы первой точки
        System.out.println("Введите широту и долготу первой точки (в градусах):");
        // Считывание введенной пользователем широты первой точки
        double lat1 = s.nextDouble();
        // Считывание введенной пользователем долготы первой точки
        double lon1 = s.nextDouble();

        // Вывод на экран сообщения с запросом ввода широты и долготы второй точки
        System.out.println("Введите широту и долготу второй точки (в градусах):");
        // Считывание введенной пользователем широты второй точки
        double lat2 = s.nextDouble();
        // Считывание введенной пользователем долготы второй точки
        double lon2 = s.nextDouble();

        // Вычисление расстояния между двумя точками с помощью метода calcDist
        // и сохранение результата в переменную distance
        double distance = calcDist(lat1, lon1, lat2, lon2);
        // Вывод на экран расстояния между двумя точками в километрах
        System.out.println("Расстояние между двумя точками: " + distance + " км");

        s.close();// Закрытие объекта Scanner для освобождения ресурсов
    }

    // Объявление приватного статического метода calcDist,
    // который принимает широту и долготу двух точек и возвращает расстояние между ними
    private static double calcDist(double lat1, double lon1, double lat2, double lon2) {
        // Преобразование широты первой точки из градусов в радианы
        lat1 = Math.toRadians(lat1);
        // Преобразование долготы первой точки из градусов в радианы
        lon1 = Math.toRadians(lon1);
        // Преобразование широты второй точки из градусов в радианы
        lat2 = Math.toRadians(lat2);
        // Преобразование долготы второй точки из градусов в радианы
        lon2 = Math.toRadians(lon2);

        double dLat = lat2 - lat1; // Вычисление разницы между широтами в радианах
        double dLon = lon2 - lon1; // Вычисление разницы между долготами в радианах

        // Вычисление промежуточного значения 'a' для формулы гаверсинусовой дистанции
        double a = Math.pow(Math.sin(dLat / 2), 2) + Math.cos(lat1)
                * Math.cos(lat2) * Math.pow(Math.sin(dLon / 2), 2);
        // Вычисление угла между точками на сфере
        double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

        // Возврат расстояния между двумя точками на поверхности Земли в километрах
        return EARTH_RADIUS_KM * c;
    }
}
